{"version":3,"sources":["hooks/useSessionStorage.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","demos/TodoApp.js"],"names":["__webpack_require__","d","__webpack_exports__","useSessionStorage","react__WEBPACK_IMPORTED_MODULE_0__","_ref","key","getter","setter","ref","useRef","useEffect","json","window","sessionStorage","getItem","current","JSON","parse","value","stringify","setItem","_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","Symbol","iterator","Object","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","_objectWithoutProperties","source","excluded","target","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","App","state","useCostate","todos","text","assign","co","handleAddTodo","alert","push","id","Date","now","content","completed","react_default","a","createElement","Fragment","TodoInput","onKeyUp","event","onClick","hasActiveItem","some","todo","forEach","Todos","Footer","map","Todo","_ref2","edit","handleEdited","remove","onBlur","_ref3","props","type","onChange","_ref4","activeItems","filter","completedItems","reverse","item"],"mappings":"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","file":"static/js/4.880ac11a.chunk.js","sourcesContent":["import { useRef, useEffect } from 'react'\r\n\r\nexport default function useSessionStorage({ key, getter, setter }) {\r\n  let ref = useRef({ key, getter, setter })\r\n\r\n  useEffect(() => {\r\n    let json = window.sessionStorage.getItem(key)\r\n\r\n    if (json) {\r\n      ref.current.setter(JSON.parse(json))\r\n    }\r\n\r\n    return () => {\r\n      let value = JSON.stringify(ref.current.getter())\r\n      window.sessionStorage.setItem(key, value)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    ref.current = { key, getter, setter }\r\n  }, [key, getter, setter])\r\n}\r\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React from 'react'\r\nimport co, { useCostate, remove } from 'costate'\r\nimport useSessionStorage from '../hooks/useSessionStorage'\r\n\r\nexport default function App() {\r\n  let state = useCostate({\r\n    todos: [],\r\n    text: {\r\n      value: ''\r\n    }\r\n  })\r\n\r\n  useSessionStorage({\r\n    key: 'todos-json',\r\n    getter: () => state,\r\n    setter: source => Object.assign(co(state), source)\r\n  })\r\n\r\n  let handleAddTodo = () => {\r\n    if (!state.text.value) {\r\n      return alert('empty content')\r\n    }\r\n\r\n    co(state).todos.push({\r\n      id: Date.now(),\r\n      content: state.text.value,\r\n      completed: false\r\n    })\r\n    co(state).text.value = ''\r\n  }\r\n\r\n  let handleKeyUp = event => {\r\n    if (event.key === 'Enter') {\r\n      handleAddTodo()\r\n    }\r\n  }\r\n\r\n  let handleToggleAll = () => {\r\n    let hasActiveItem = state.todos.some(todo => !todo.completed)\r\n\r\n    co(state).todos.forEach(todo => {\r\n      todo.completed = hasActiveItem\r\n    })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <TodoInput text={state.text} onKeyUp={handleKeyUp} />\r\n        <button onClick={handleAddTodo}>add</button>\r\n        <button onClick={handleToggleAll}>toggle-all</button>\r\n      </div>\r\n      <Todos todos={state.todos} />\r\n      <Footer todos={state.todos} />\r\n    </>\r\n  )\r\n}\r\n\r\nfunction Todos({ todos }) {\r\n  return (\r\n    <ul>\r\n      {todos.map(todo => {\r\n        return <Todo key={todo.id} todo={todo} />\r\n      })}\r\n    </ul>\r\n  )\r\n}\r\n\r\nfunction Todo({ todo }) {\r\n  let edit = useCostate({ value: false })\r\n  let text = useCostate({ value: '' })\r\n\r\n  let handleEdit = () => {\r\n    co(edit).value = !edit.value\r\n    co(text).value = todo.content\r\n  }\r\n\r\n  let handleEdited = () => {\r\n    co(edit).value = false\r\n    co(todo).content = text.value\r\n  }\r\n\r\n  let handleKeyUp = event => {\r\n    if (event.key === 'Enter') {\r\n      handleEdited()\r\n    }\r\n  }\r\n\r\n  let handleRemove = () => {\r\n    remove(co(todo))\r\n  }\r\n\r\n  let handleToggle = () => {\r\n    co(todo).completed = !todo.completed\r\n  }\r\n\r\n  return (\r\n    <li>\r\n      <button onClick={handleRemove}>remove</button>\r\n      <button onClick={handleToggle}>\r\n        {todo.completed ? 'completed' : 'active'}\r\n      </button>\r\n      {edit.value && (\r\n        <TodoInput text={text} onBlur={handleEdited} onKeyUp={handleKeyUp} />\r\n      )}\r\n      {!edit.value && <span onClick={handleEdit}>{todo.content}</span>}\r\n    </li>\r\n  )\r\n}\r\n\r\nfunction TodoInput({ text, ...props }) {\r\n  let handleChange = event => {\r\n    co(text).value = event.target.value\r\n  }\r\n  return (\r\n    <input type=\"text\" {...props} onChange={handleChange} value={text.value} />\r\n  )\r\n}\r\n\r\nfunction Footer({ todos }) {\r\n  let activeItems = todos.filter(todo => !todo.completed)\r\n  let completedItems = todos.filter(todo => todo.completed)\r\n\r\n  let handleClearCompleted = () => {\r\n    ;[...completedItems].reverse().forEach(item => remove(co(item)))\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {activeItems.length} item{activeItems.length > 1 && 's'} left |{' '}\r\n      {completedItems.length > 0 && (\r\n        <button onClick={handleClearCompleted}>Clear completed</button>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"sourceRoot":""}